{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nlet limit_per_page = 15; \n\nasync function getImagesByQuery(query, page = 1) { \n      \n  try { \n\n    const res = await axios.get('', {\n      params: {\n        key: '54641961-e96e5217be963f5aab39f9ddc',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: limit_per_page, \n        page: page,               \n      }\n    });\n\n    const data = res.data;\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'No results',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'center',\n        timeout: 5000\n      });\n    }\n\n    return data;\n\n  } catch (error) {\n\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'center',\n      timeout: 5000\n    });\n\n    throw error;\n  }\n}\n\nexport default getImagesByQuery;","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst newBox = new  SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",       // беремо текст з alt\n  captionPosition: \"bottom\", // позиція підпису знизу\n  captionDelay: 250,         // затримка появи підпису\n});\n\n// Ця функція повинна приймати масив images, створювати HTML-розмітку для галереї, додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\nfunction createGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n\n  // --- Перевірка кратності 3 ---\n  const remainder = images.length % 3;\n  if (remainder !== 0) {\n    const emptyCount = 3 - remainder;\n    for (let i = 0; i < emptyCount; i++) {\n      images.push(\"\"); // додаємо \"порожні фото\"\n    }\n  }\n\n  const markup = images.map(image => {\n    if (!image) {\n      // якщо порожній елемент — додаємо порожню li для вирівнювання\n      return `<li class=\"gallery-item empty-item\"></li>`;\n    }\n\n    return `\n<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img \n      class=\"gallery-image\" \n      src=\"${image.webformatURL}\" \n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"info\">\n    <div class=\"info-titles\">\n      <p>Likes</p>\n      <p>Views</p>\n      <p>Comments</p>\n      <p>Downloads</p>\n    </div>\n    <div class=\"info-values\">\n      <p>${image.likes}</p>\n      <p>${image.views}</p>\n      <p>${image.comments}</p>\n      <p>${image.downloads}</p>\n    </div>\n  </div>\n</li>\n    `;\n  }).join('');\n\n  galleryContainer.innerHTML = markup;\n\n  // --- Стилі контейнера ---\n  galleryContainer.style.display = \"flex\";\n  galleryContainer.style.flexWrap = \"wrap\";\n  galleryContainer.style.gap = \"24px\";\n  galleryContainer.style.justifyContent = \"center\";\n  galleryContainer.style.alignItems = \"center\";\n  galleryContainer.style.listStyle = \"none\";\n  galleryContainer.style.maxWidth = \"1200px\";\n  galleryContainer.style.margin = \"0 auto\";\n\n  // --- Стилі для кожної li ---\n  const items = galleryContainer.querySelectorAll(\"li\");\n  items.forEach(item => {\n    item.style.flex = \"1 1 360px\";\n    item.style.height = \"200px\";\n    item.style.border = item.classList.contains(\"empty-item\") ? \"none\" : \"1px solid #808080\";\n    item.style.overflow = \"hidden\";\n    item.style.width = \"360px\";\n    item.style.display = \"flex\";\n    item.style.flexDirection = \"column\";\n    item.style.background = item.classList.contains(\"empty-item\") ? \"transparent\" : \"white\";\n  });\n\n  // --- Стилі для img ---\n  const imgs = galleryContainer.querySelectorAll(\"img\");\n  imgs.forEach(img => {\n    img.style.width = \"100%\";\n    img.style.height = \"160px\";\n    img.style.objectFit = \"cover\";\n    img.style.display = \"block\";\n  });\n\n  // --- Стилі для info ---\n  const infos = galleryContainer.querySelectorAll(\".info\");\n  infos.forEach(info => {\n    info.style.display = \"flex\";\n    info.style.flexDirection = \"column\";\n    info.style.alignItems = \"center\";\n    info.style.padding = \"4px\";\n    info.style.fontSize = \"12px\";\n\n    const titles = info.querySelector(\".info-titles\");\n    const values = info.querySelector(\".info-values\");\n\n    titles.style.display = \"flex\";\n    titles.style.justifyContent = \"space-around\";\n    titles.style.width = \"100%\";\n    titles.style.fontWeight = \"bold\";\n\n    values.style.display = \"flex\";\n    values.style.justifyContent = \"space-around\";\n    values.style.width = \"100%\";\n  });\n\n  newBox.refresh(); // оновлюємо SimpleLightbox\n}\n\n// Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\nfunction clearGallery() {\nconst galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = ''; // очищаємо весь вміст контейнера\n\n  newBox.refresh(); // оновлюємо екземпляр SimpleLightbox\n} \n\n// Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\nfunction showLoader() {\n  const loader = document.getElementById('loader');\n  loader.classList.remove('is-hidden'); // показати спінер\n\n} \n\n// Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\nfunction hideLoader() {\n  const loader = document.getElementById('loader');\n  loader.classList.add('is-hidden'); // приховати спінер\n}\n\n\n// Показати кнопку Load more\nfunction showLoadMoreButton() {\n  const button = document.querySelector('.load-more');\n  button.classList.remove('is-hidden');\n}\n\n// Приховати кнопку Load more\nfunction hideLoadMoreButton() {\n  const button = document.querySelector('.load-more');\n  button.classList.add('is-hidden');\n}\n\nexport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton };\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader } from './js/render-functions.js';\n\n// --- Селектори ---\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input[name=\"search-text\"]');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n// --- Повідомлення про кінець / пусту галерею ---\nlet endMessageDiv = document.querySelector('.end-message');\nif (!endMessageDiv) {\n  endMessageDiv = document.createElement('div');\n  endMessageDiv.className = 'end-message';\n  endMessageDiv.textContent = \"We're sorry, but you've reached the end of search results.\";\n  document.querySelector('.gallery-footer').appendChild(endMessageDiv);\n}\n\n// --- Глобальні змінні ---\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nlet loadedImages = [];\n\n// --- Функція оновлення кнопки Load More ---\nfunction updateLoadMoreVisibility() {\n  if (loadedImages.length >= totalHits) {\n    loadMoreBtn.classList.add('is-hidden');       // ховаємо кнопку\n    endMessageDiv.classList.add('show');          // показуємо повідомлення\n  } else {\n    loadMoreBtn.classList.remove('is-hidden');    // показуємо кнопку\n    endMessageDiv.classList.remove('show');       // ховаємо повідомлення\n  }\n}\n\n// --- Обробник сабміту форми ---\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query!',\n      position: 'center',\n    });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  loadedImages = [];\n  clearGallery();\n  loadMoreBtn.classList.add('is-hidden');\n  endMessageDiv.classList.remove('show');\n\n  showLoader();\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    const hits = data.hits;\n    totalHits = data.totalHits;\n\n    if (!hits || hits.length === 0) {\n      endMessageDiv.textContent = \"Sorry, there are no images matching your search query.\";\n      endMessageDiv.classList.add('show');\n//      iziToast.info({\n//        title: 'No results',\n//        message: 'Sorry, there are no images matching your search query.',\n//        position: 'center',\n//      });\n      return;\n    }\n\n    loadedImages = [...hits];\n    createGallery(loadedImages);\n    updateLoadMoreVisibility();\n\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Failed to fetch images: ${error.message}`,\n      position: 'topRight',\n      timeout: 5000\n    });\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader();\n  }\n});\n\n// --- Обробник кнопки Load More ---\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  loadMoreBtn.classList.add('is-hidden');     // ховаємо кнопку одразу\n  endMessageDiv.classList.remove('show');     // ховаємо повідомлення під час завантаження\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    const hits = data.hits;\n\n    if (!hits || hits.length === 0) {\n      endMessageDiv.textContent = \"We're sorry, but you've reached the end of search results.\";\n      endMessageDiv.classList.add('show');\n      iziToast.info({\n        title: 'End',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'center',\n      });\n      return;\n    }\n\n    loadedImages.push(...hits);\n    createGallery(loadedImages);\n\n    // --- Плавна прокрутка ---\n    const galleryItem = document.querySelector('.gallery li');\n    if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth'\n      });\n    }\n\n    updateLoadMoreVisibility();\n\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Failed to load more images: ${error.message}`,\n      position: 'topRight',\n      timeout: 5000\n    });\n    console.error('Error fetching more images:', error);\n  } finally {\n    hideLoader();\n  }\n});\n\n"],"names":["axios","limit_per_page","getImagesByQuery","query","page","data","iziToast","error","newBox","SimpleLightbox","createGallery","images","galleryContainer","remainder","emptyCount","i","markup","image","item","img","info","titles","values","clearGallery","showLoader","hideLoader","form","input","loadMoreBtn","endMessageDiv","currentQuery","currentPage","totalHits","loadedImages","updateLoadMoreVisibility","event","hits","galleryItem","height"],"mappings":"owBAOAA,EAAM,SAAS,QAAU,2BAEzB,IAAIC,EAAiB,GAErB,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CAE/C,GAAI,CAcF,MAAMC,GAZM,MAAML,EAAM,IAAI,GAAI,CAC9B,OAAQ,CACN,IAAK,qCACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAMG,CACP,CACP,CAAK,GAEgB,KAEjB,OAAIC,EAAK,KAAK,SAAW,GACvBC,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,2EACT,SAAU,SACV,QAAS,GACjB,CAAO,EAGID,CAER,OAAQE,EAAO,CAEd,MAAAD,EAAS,MAAM,CACb,MAAO,QACP,QAASC,EAAM,QACf,SAAU,SACV,QAAS,GACf,CAAK,EAEKA,CACP,CACH,CC/CA,MAAMC,EAAS,IAAKC,EAAe,aAAc,CAC/C,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAGD,SAASC,EAAcC,EAAQ,CAC7B,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAGpDC,EAAYF,EAAO,OAAS,EAClC,GAAIE,IAAc,EAAG,CACnB,MAAMC,EAAa,EAAID,EACvB,QAASE,EAAI,EAAGA,EAAID,EAAYC,IAC9BJ,EAAO,KAAK,EAAE,CAEjB,CAED,MAAMK,EAASL,EAAO,IAAIM,GACnBA,EAKE;AAAA;AAAA,kCAEuBA,EAAM,aAAa;AAAA;AAAA;AAAA,aAGxCA,EAAM,YAAY;AAAA,aAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAWZA,EAAM,KAAK;AAAA,WACXA,EAAM,KAAK;AAAA,WACXA,EAAM,QAAQ;AAAA,WACdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,MAvBb,2CA4BV,EAAE,KAAK,EAAE,EAEVL,EAAiB,UAAYI,EAG7BJ,EAAiB,MAAM,QAAU,OACjCA,EAAiB,MAAM,SAAW,OAClCA,EAAiB,MAAM,IAAM,OAC7BA,EAAiB,MAAM,eAAiB,SACxCA,EAAiB,MAAM,WAAa,SACpCA,EAAiB,MAAM,UAAY,OACnCA,EAAiB,MAAM,SAAW,SAClCA,EAAiB,MAAM,OAAS,SAGlBA,EAAiB,iBAAiB,IAAI,EAC9C,QAAQM,GAAQ,CACpBA,EAAK,MAAM,KAAO,YAClBA,EAAK,MAAM,OAAS,QACpBA,EAAK,MAAM,OAASA,EAAK,UAAU,SAAS,YAAY,EAAI,OAAS,oBACrEA,EAAK,MAAM,SAAW,SACtBA,EAAK,MAAM,MAAQ,QACnBA,EAAK,MAAM,QAAU,OACrBA,EAAK,MAAM,cAAgB,SAC3BA,EAAK,MAAM,WAAaA,EAAK,UAAU,SAAS,YAAY,EAAI,cAAgB,OACpF,CAAG,EAGYN,EAAiB,iBAAiB,KAAK,EAC/C,QAAQO,GAAO,CAClBA,EAAI,MAAM,MAAQ,OAClBA,EAAI,MAAM,OAAS,QACnBA,EAAI,MAAM,UAAY,QACtBA,EAAI,MAAM,QAAU,OACxB,CAAG,EAGaP,EAAiB,iBAAiB,OAAO,EACjD,QAAQQ,GAAQ,CACpBA,EAAK,MAAM,QAAU,OACrBA,EAAK,MAAM,cAAgB,SAC3BA,EAAK,MAAM,WAAa,SACxBA,EAAK,MAAM,QAAU,MACrBA,EAAK,MAAM,SAAW,OAEtB,MAAMC,EAASD,EAAK,cAAc,cAAc,EAC1CE,EAASF,EAAK,cAAc,cAAc,EAEhDC,EAAO,MAAM,QAAU,OACvBA,EAAO,MAAM,eAAiB,eAC9BA,EAAO,MAAM,MAAQ,OACrBA,EAAO,MAAM,WAAa,OAE1BC,EAAO,MAAM,QAAU,OACvBA,EAAO,MAAM,eAAiB,eAC9BA,EAAO,MAAM,MAAQ,MACzB,CAAG,EAEDd,EAAO,QAAO,CAChB,CAGA,SAASe,GAAe,CACxB,MAAMX,EAAmB,SAAS,cAAc,UAAU,EACxDA,EAAiB,UAAY,GAE7BJ,EAAO,QAAO,CAChB,CAGA,SAASgB,GAAa,CACL,SAAS,eAAe,QAAQ,EACxC,UAAU,OAAO,WAAW,CAErC,CAGA,SAASC,GAAa,CACL,SAAS,eAAe,QAAQ,EACxC,UAAU,IAAI,WAAW,CAClC,CC/HA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,cAAc,2BAA2B,EACtDE,EAAc,SAAS,cAAc,YAAY,EAGvD,IAAIC,EAAgB,SAAS,cAAc,cAAc,EACpDA,IACHA,EAAgB,SAAS,cAAc,KAAK,EAC5CA,EAAc,UAAY,cAC1BA,EAAc,YAAc,6DAC5B,SAAS,cAAc,iBAAiB,EAAE,YAAYA,CAAa,GAIrE,IAAIC,EAAe,GACfC,EAAc,EACdC,EAAY,EACZC,EAAe,CAAA,EAGnB,SAASC,GAA2B,CAC9BD,EAAa,QAAUD,GACzBJ,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAc,UAAU,IAAI,MAAM,IAElCD,EAAY,UAAU,OAAO,WAAW,EACxCC,EAAc,UAAU,OAAO,MAAM,EAEzC,CAGAH,EAAK,iBAAiB,SAAU,MAAOS,GAAU,CAC/CA,EAAM,eAAc,EACpB,MAAMhC,EAAQwB,EAAM,MAAM,KAAI,EAE9B,GAAI,CAACxB,EAAO,CACVG,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,+BACT,SAAU,QAChB,CAAK,EACD,MACD,CAEDwB,EAAe3B,EACf4B,EAAc,EACdE,EAAe,CAAA,EACfV,IACAK,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAc,UAAU,OAAO,MAAM,EAErCL,IACA,GAAI,CACF,MAAMnB,EAAO,MAAMH,EAAiB4B,EAAcC,CAAW,EACvDK,EAAO/B,EAAK,KAGlB,GAFA2B,EAAY3B,EAAK,UAEb,CAAC+B,GAAQA,EAAK,SAAW,EAAG,CAC9BP,EAAc,YAAc,yDAC5BA,EAAc,UAAU,IAAI,MAAM,EAMlC,MACD,CAEDI,EAAe,CAAC,GAAGG,CAAI,EACvB1B,EAAcuB,CAAY,EAC1BC,GAED,OAAQ3B,EAAO,CACdD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,2BAA2BC,EAAM,OAAO,GACjD,SAAU,WACV,QAAS,GACf,CAAK,EACD,QAAQ,MAAM,yBAA0BA,CAAK,CACjD,QAAY,CACRkB,GACD,CACH,CAAC,EAGDG,EAAY,iBAAiB,QAAS,SAAY,CAChDG,GAAe,EACfH,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAc,UAAU,OAAO,MAAM,EACrCL,IAEA,GAAI,CAEF,MAAMY,GADO,MAAMlC,EAAiB4B,EAAcC,CAAW,GAC3C,KAElB,GAAI,CAACK,GAAQA,EAAK,SAAW,EAAG,CAC9BP,EAAc,YAAc,6DAC5BA,EAAc,UAAU,IAAI,MAAM,EAClCvB,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,6DACT,SAAU,QAClB,CAAO,EACD,MACD,CAED2B,EAAa,KAAK,GAAGG,CAAI,EACzB1B,EAAcuB,CAAY,EAG1B,MAAMI,EAAc,SAAS,cAAc,aAAa,EACxD,GAAIA,EAAa,CACf,KAAM,CAAE,OAAAC,CAAM,EAAKD,EAAY,sBAAqB,EACpD,OAAO,SAAS,CACd,IAAKC,EAAS,EACd,SAAU,QAClB,CAAO,CACF,CAEDJ,GAED,OAAQ3B,EAAO,CACdD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+BAA+BC,EAAM,OAAO,GACrD,SAAU,WACV,QAAS,GACf,CAAK,EACD,QAAQ,MAAM,8BAA+BA,CAAK,CACtD,QAAY,CACRkB,GACD,CACH,CAAC"}