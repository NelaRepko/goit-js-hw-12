{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nlet limit_per_page = 15; \n\nasync function getImagesByQuery(query, page = 1) { \n      \n  try { \n\n    const res = await axios.get('', {\n      params: {\n        key: '54641961-e96e5217be963f5aab39f9ddc',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: limit_per_page, \n        page: page,               \n      }\n    });\n\n    const data = res.data;\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'No results',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'center',\n        timeout: 5000\n      });\n    }\n\n    return data;\n\n  } catch (error) {\n\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'center',\n      timeout: 5000\n    });\n\n    throw error;\n  }\n}\n\nexport default getImagesByQuery;","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst newBox = new  SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",       // беремо текст з alt\n  captionPosition: \"bottom\", // позиція підпису знизу\n  captionDelay: 250,         // затримка появи підпису\n});\n\n// Ця функція повинна приймати масив images, створювати HTML-розмітку для галереї, додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\nfunction createGallery(images) {\n\nconst galleryContainer = document.querySelector('.gallery');\n\n  const markup = images.map(image => `\n<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img \n      class=\"gallery-image\" \n      src=\"${image.webformatURL}\" \n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"info\">\n    <div class=\"info-titles\">\n      <p>Likes</p>\n      <p>Views</p>\n      <p>Comments</p>\n      <p>Downloads</p>\n    </div>\n    <div class=\"info-values\">\n      <p>${image.likes}</p>\n      <p>${image.views}</p>\n      <p>${image.comments}</p>\n      <p>${image.downloads}</p>\n    </div>\n  </div>\n</li>\n  `).join('');\n\n  galleryContainer.innerHTML = markup; //додаємо елементи галереї в контейнер\n\n   // --- Додаємо стилі контейнеру ---\n  galleryContainer.style.display = \"flex\";\n  galleryContainer.style.flexWrap = \"wrap\";\n  galleryContainer.style.gap = \"24px\";\n  galleryContainer.style.justifyContent = \"center\";\n  galleryContainer.style.alignItems = \"center\";\n  galleryContainer.style.listStyle = \"none\";\n  galleryContainer.style.maxWidth = \"1200px\";\n  galleryContainer.style.margin = \"0 auto\";        // центр UL на сторінці\n\n  // --- Додаємо стилі для кожної li ---\n  const items = galleryContainer.querySelectorAll(\"li\");\n  items.forEach(item => {\n    item.style.flex = \"1 1 360px\";\n    item.style.height = \"200px\";\n//    item.style.maxWidth = \"100%\";\n    item.style.border = \"1px solid #808080\";\n    item.style.overflow = \"hidden\";\n//    item.style.justifyContent = \"center\";\n//    item.style.alignItems = \"center\";\n    item.style.width = \"360px\";\n    item.style.display = \"flex\";\n    item.style.flexDirection = \"column\";\n  });\n    // --- Стилі для img ---\nconst imgs = galleryContainer.querySelectorAll(\"img\");\nimgs.forEach(img => {\n  img.style.width = \"100%\";\n//  img.style.height = \"100%\";\n  img.style.height = \"160px\";\n  img.style.objectFit = \"cover\"; // картинка займає всю li\n  img.style.display = \"block\";\n});\n\nconst infos = galleryContainer.querySelectorAll(\".info\");\ninfos.forEach(info => {\n  info.style.display = \"flex\";\n  info.style.flexDirection = \"column\"; // колонки для заголовків і значень\n  info.style.alignItems = \"center\";\n  info.style.padding = \"4px\";\n  info.style.fontSize = \"12px\";\n\n  const titles = info.querySelector(\".info-titles\");\n  const values = info.querySelector(\".info-values\");\n\n  // перша лінійка: заголовки\n  titles.style.display = \"flex\";\n  titles.style.justifyContent = \"space-around\";\n  titles.style.width = \"100%\";\n  titles.style.fontWeight = \"bold\"; // <-- жирний шрифт для заголовків\n\n\n  // друга лінійка: значення\n  values.style.display = \"flex\";\n  values.style.justifyContent = \"space-around\";\n  values.style.width = \"100%\";\n});\n\n  newBox.refresh(); // оновлюємо екземпляр SimpleLightbox\n\n}\n\n// Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\nfunction clearGallery() {\nconst galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = ''; // очищаємо весь вміст контейнера\n\n  newBox.refresh(); // оновлюємо екземпляр SimpleLightbox\n} \n\n// Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\nfunction showLoader() {\n  const loader = document.getElementById('loader');\n  loader.classList.remove('is-hidden'); // показати спінер\n\n} \n\n// Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\nfunction hideLoader() {\n  const loader = document.getElementById('loader');\n  loader.classList.add('is-hidden'); // приховати спінер\n}\n\n\n// Показати кнопку Load more\nfunction showLoadMoreButton() {\n  const button = document.querySelector('.load-more');\n  button.classList.remove('is-hidden');\n}\n\n// Приховати кнопку Load more\nfunction hideLoadMoreButton() {\n  const button = document.querySelector('.load-more');\n  button.classList.add('is-hidden');\n}\n\nexport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton };\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\n\n// --- Селектори ---\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input[name=\"search-text\"]');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n// --- Глобальні змінні ---\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\n// --- Функція для оновлення кнопки Load More ---\nfunction updateLoadMoreVisibility() {\n  if (currentPage * 15 >= totalHits) {\n    hideLoadMoreButton();\n    if (currentPage > 1) { // повідомляємо тільки при натисканні Load More\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        timeout: 5000\n      });\n    }\n  } else {\n    showLoadMoreButton();\n  }\n}\n\n// --- Обробник сабміту форми ---\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query!',\n      position: 'center',\n    });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  clearGallery();\n  hideLoadMoreButton();\n\n  showLoader();\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    const hits = data.hits;\n    totalHits = data.totalHits;\n\n    if (!hits || hits.length === 0) {\n      iziToast.warning({\n        title: 'No results',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 5000\n      });\n      return;\n    }\n\n    // --- Відображаємо першу групу ---\n    createGallery(hits);\n\n    // --- Показуємо Load More, якщо є ще сторінки ---\n    if (totalHits > hits.length) {\n      showLoadMoreButton();\n    }\n\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader();\n  }\n});\n\n// --- Обробник кнопки Load More ---\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    const hits = data.hits;\n\n    if (!hits || hits.length === 0) {\n      hideLoadMoreButton();\n      return;\n    }\n\n    // --- Додаємо нові елементи до існуючої галереї ---\n    const galleryContainer = document.querySelector('.gallery');\n\n    // перетворюємо існуючі li в об’єкти\n    const existingImages = [...galleryContainer.querySelectorAll('li')].map(li => ({\n      webformatURL: li.querySelector('img').src,\n      largeImageURL: li.querySelector('a').href,\n      likes: parseInt(li.querySelector('.info-values p:nth-child(1)').textContent),\n      views: parseInt(li.querySelector('.info-values p:nth-child(2)').textContent),\n      comments: parseInt(li.querySelector('.info-values p:nth-child(3)').textContent),\n      downloads: parseInt(li.querySelector('.info-values p:nth-child(4)').textContent),\n      tags: li.querySelector('img').alt\n    }));\n\n    createGallery([...existingImages, ...hits]);\n\n    // --- Плавна прокрутка ---\n    const galleryItem = document.querySelector('.gallery li');\n    if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth'\n      });\n    }\n\n    updateLoadMoreVisibility();\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n  } finally {\n    hideLoader();\n  }\n});\n\n"],"names":["axios","limit_per_page","getImagesByQuery","query","page","data","iziToast","error","newBox","SimpleLightbox","createGallery","images","galleryContainer","markup","image","item","img","info","titles","values","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","loadMoreBtn","currentQuery","currentPage","totalHits","updateLoadMoreVisibility","event","hits","existingImages","li","galleryItem","height"],"mappings":"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"}